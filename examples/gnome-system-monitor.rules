#!/usr/bin/make -f
# -*- mode: makefile; coding: utf-8 -*-
# Copyright Â© 2003 Colin Walters <walters@verbum.org>

include /usr/share/cdbs/1/rules/debhelper.mk
# Including this file gets us a simple patch system.  You can just
# drop patches in debian/patches, and they will be automatically
# applied and unapplied.
include /usr/share/cdbs/1/rules/simple-patchsys.mk
# Including this gives us a number of rules typical to a GNOME
# program, including setting GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1.
# Note that this class inherits from autotools.mk and docbookxml.mk,
# so you don't need to include those too.
include /usr/share/cdbs/1/class/gnome.mk

# This variable is used by debhelper.mk; we are telling it to install
# the manpage we generate below.
DEB_INSTALL_MANPAGES_gnome-system-monitor := debian/gnome-system-monitor.1

# Here we hook in creating a manpage into the build process.
build/gnome-system-monitor::
	/usr/bin/docbook-to-man debian/gnome-system-monitor.sgml > debian/gnome-system-monitor.1

clean::
	rm -f debian/gnome-system-monitor.1
	find help -name '*omf.out' -exec rm -f \{\} \;
